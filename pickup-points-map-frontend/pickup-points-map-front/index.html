<!DOCTYPE html>
<html lang="pl-PL">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="Description" content="Author: BeeCommerce, Type: Widget, Name: Pickup-Points-Map">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,700i,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/animate.css@3.5.1" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css" />
    <title>pickup-points-map-front</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script>
      // response to events 
      // window.addEventListener('msg', function(event){
      //   if(event.origin !== 'https://dev.bardotti.pl/pickup-points-map/') return;
      //   console.log('message recieved: ' + event.data, event)
      //   event.source.postMessage('Hello callback from iframe', event.origin)
      // }, false)
      // var data = { foo: 'bar' }
      // var event = new CustomEvent('myCustomEvent', { detail: data })
      // window.parent.document.dispatchEvent(event)
      
      // From parent - it works
      window.addEventListener('message', function(event) { 
        if (~event.origin.indexOf('https://dev.bardotti.pl')) { 
          console.log(event.data);
          console.log(event.data.msg); 
        } else {  
          return; 
        } 
      }); 
      // From iframe
      var msgIframe = 'Hello from iframe!'
      var sendMessage = function(value) {
        window.parent.postMessage(value, 'https://dev.bardotti.pl/pickup-points-map')
      }
      sendMessage(msgIframe)
    </script>
  </body>
</html>
